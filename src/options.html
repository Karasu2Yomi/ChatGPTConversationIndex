<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ChatGPT Conversation Index - Options</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", sans-serif; margin: 16px; }
    .card { max-width: 760px; border: 1px solid #ddd; border-radius: 12px; padding: 16px; }
    h1 { font-size: 18px; margin: 0 0 12px; }
    .row { display: flex; gap: 12px; align-items: center; margin: 10px 0; }
    label { min-width: 280px; }
    input[type="number"] { width: 120px; padding: 6px 8px; }
    input[type="checkbox"] { transform: scale(1.1); }
    .hint { color: #555; font-size: 12px; margin-top: 8px; line-height: 1.5; }
    .actions { display: flex; gap: 10px; margin-top: 14px; flex-wrap: wrap; }
    button { padding: 8px 12px; border-radius: 10px; border: 1px solid #ccc; background: #f7f7f7; cursor: pointer; }
    button:hover { background: #eee; }
    .status { margin-top: 10px; font-size: 12px; color: #0a6; }
  </style>
</head>
<body>
  <div class="card">
    <h1>ChatGPT Conversation Index - 設定</h1>

    <div class="row">
      <label for="enabled">会話ページで有効化</label>
      <input id="enabled" type="checkbox" />
    </div>

    <div class="row">
      <label for="displayLen">リスト表示の文字数（例：20）</label>
      <input id="displayLen" type="number" min="1" max="200" />
    </div>

    <div class="row">
      <label for="tooltipLen">ツールチップの最大文字数（例：80）</label>
      <input id="tooltipLen" type="number" min="1" max="500" />
    </div>

    <div class="row">
      <label for="showPreviewText">タイトル（先頭テキスト）を表示</label>
      <input id="showPreviewText" type="checkbox" />
    </div>

    <div class="row">
      <label for="autoRefreshOnAnswerDone">自動更新（回答完了後のみ / 折りたたみ中は無効）</label>
      <input id="autoRefreshOnAnswerDone" type="checkbox" />
    </div>

    <div class="row">
      <label for="collapsed">初期状態を折りたたみにする</label>
      <input id="collapsed" type="checkbox" />
    </div>

    <div class="actions">
      <button id="save">保存</button>
      <button id="reset">初期値に戻す</button>
      <button id="resetPos">パネル位置をリセット</button>
    </div>

    <div class="status" id="status"></div>

    <div class="hint">
      <div>・この拡張は <b>会話ページ（/c/… または /g/…/c/… /share/…）</b> のみで動きます。</div>
      <div>・自動更新は <b>ポーリング方式（低負荷）</b>で <b>回答が完了した瞬間</b>に目次を更新します（折りたたみ中は更新しません）。</div>
      <div>・古い発言が目次に出ない場合は、上へスクロールして読み込ませてから ↻ を押してください（ChatGPT側が仮想化している場合があります）。</div>
    </div>
  </div>

  <script src="options.js"></script>
</body>
</html>
